##########################################################################
# Main configuration file for Mutt
#
# Note:
#       Many comments and settings come from Sven Guckes .muttrc
##########################################################################

# Use default configuration
# source "/etc/Muttrc"

# Set the email address you want as your default 'from' address
set realname			= "John Doe"
set from				= "user@domain.com"
set use_from			= yes

# Use built-in smtp to send outgoing mail
set smtp_pass			= 'password'
set smtp_url			= 'smtps://user@smtp.domain.com'

# Set the editor to vi
set editor				= "vim +13 -c 'set tw=72 ft=mail noautoindent'"

# XXX
set index_format		= '%4C %Z %{%b %D %Y} %-15.15L (%?l?%4l&%4c?) %s'

# XXX
set abort_nosubject		= no

# XXX
set auto_tag			= yes

# MIME options
set mime_forward		= yes
set mime_forward_rest 	= yes

# Set up preview pane for messages
set pager_index_lines 	= '6'

# Accept server certificates from a different host than localhost
set ssl_verify_host		= no

# Set the sort order for the mail browser
set sort_browser		= 'date'

# View HTML mails properly
auto_view text/html

# Tell mutt to use the Mbox format
set mbox_type			= mbox

# Set the proper charsets
set assumed_charset		= 'iso-2022-jp:euc-jp:shift_jis:utf-8'
set attach_charset		= 'iso-2022-jp:euc-jp:shift_jis:utf-8'
set send_charset		= 'us-ascii:iso-8859-1:iso-2022-jp:utf-8'

# Configure the locations of the common folders
set mask				= "!^\\.[^.]"
set folder				= "/Volumes/Drobo/mail"
set mbox				= "+inbox"
set record				= "+sent"
set postponed			= "+drafts"
set spoolfile			= "+inbox"

# Set up mailboxes by scanning for all subfolders in $MAILDIR/mail
mailboxes				= inbox
#mailboxes `echo en "! + "; find $HOME/Mail -maxdepth 1 -type d -name ".*" -print0 | xargs -0 -I xxx echo "+"xxx`

# Add macros to make the folder browser usable by always using the mailboxes setup above
macro index c "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro pager c "<change-folder>?<toggle-mailboxes>" "open a different folder"

# To additionally get straight to the folder browser when copying, moving and attaching mail
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"
macro compose A "<attach-message>?<toggle-mailboxes>" "attach message(s) to this message"

# Beep when a new message arrives
set beep_new

# Macros
# Save attachments to dropbox
macro attach W <tag-prefix><save-entry><kill-line>/dropbox/attachments

# Colors
color attachment brightmagenta default
color error      brightred    default
color hdrdefault red          default
color indicator  brightyellow red
color markers    brightcyan   default
color message    brightcyan   default
color normal     default      default
color quoted     blue         default
color search     default      green
color signature  red          default
color status     yellow       blue
color tilde      magenta      default
color tree       magenta      default

# PGP
set pgp_decode_command			= "gpg %?p?--passphrase-fd 0? --no-verbose --batch --output - %f"
set pgp_verify_command			= "gpg --no-verbose --batch --output - --verify %s %f"
set pgp_decrypt_command			= "gpg --passphrase-fd 0 --no-verbose --batch --output - %f"
set pgp_sign_command			= "gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command		= "gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_encrypt_only_command	= "pgpewrap gpg --batch --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust --encrypt-to 0xFFFFFFFF -- -r %r -- %f"
set pgp_encrypt_sign_command	= "pgpewrap gpg --passphrase-fd 0 --batch --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust --encrypt-to 0xFFFFFFFF -- -r %r -- %f"
set pgp_import_command			= "gpg --no-verbose --import -v %f"
set pgp_export_command			= "gpg --no-verbose --export --armor %r"
set pgp_verify_key_command		= "gpg --no-verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command	= "gpg --no-verbose --batch --with-colons --list-keys %r"
set pgp_list_secring_command	= "gpg --no-verbose --batch --with-colons --list-secret-keys %r"
set pgp_autosign				= no
set pgp_sign_as					= 0xFFFFFFFF
set pgp_replyencrypt			= yes
set pgp_timeout					= 1800
set pgp_good_sign				= "^gpg: Good signature from"

# Pull in the aliases files
set alias_file 			= '~/.mutt/aliases'
source $alias_file
